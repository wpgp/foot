<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An R package for processing building footprint morphometrics â€¢ foot</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="An R package for processing building footprint morphometrics">
<meta property="og:description" content="Support for morphometric calculations of building footprints implemented in R. It provides flexible tools for processing 2D vector polygon representations of structures. The functionality includes basic geometry and morphology measures, distance and clustering metrics. These calculations are supported with helper functions for spatial intersections to define zonal indices and tiled reading/writing of data files.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">foot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/footsteps.html">footsteps: Getting started</a>
    </li>
    <li>
      <a href="articles/bigfoot.html">bigfoot: Gridded footprint calculations</a>
    </li>
    <li>
      <a href="articles/cobbler.html">cobbler: Using custom summary functions</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/wpgp/foot/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="foot-an-r-package-for-processing-building-footprints" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#foot-an-r-package-for-processing-building-footprints" class="anchor"></a>foot: An R package for processing building footprints</h1></div>
<p><em><a href="https://www.worldpop.org/">WorldPop Research Group, University of Southampton</a></em></p>
<p>While remote sensing has long been used to monitor urbanisation patterns, in recent years there has been an increasing availability in finer resolution satellite data covering large areas of the globe. This very high resolution imagery (often &lt;1 m spatial resolution), combined with increased computing power is producing new datasets on urban areas. In particular, machine learning algorithms are being applied to detect, automatically extract, and map full sets of building features in a scene. These automated methods add to the manually digitised information such as from <a href="http://www.openstreetmap.org">OpenStreetMap</a> and the property datasets available from some city governments.</p>
<p>Such building footprint datasets provide a new level of detail on urban areas, particularly in places which might otherwise lack detailed maps on cities and rapidly growing areas. Despite their spatial detail, building footprints typically lack any other attribute information to help differentiate land uses or other neighbourhood characteristics. However, the size, shape, orientation, and clustering of structures produces a spatial pattern that can suggest areas of different land use or activities.</p>
<p>The <code>foot</code> package is designed to provide a set of consistent and flexible tools for processing 2D vector representations of buildings and calculating urban morphology measurements. The functionality includes basic geometry and morphology measures, distance and clustering metrics. These calculations are supported with helper functions for spatial intersections and tiled reading/writing of data.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The <code>foot</code> package can be installed directly from Github.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"wpgp/foot"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Note that building and running the code may require additional packages: <code>stars</code>, <code>raster</code>, <code>sf</code>, <code>data.table</code>, <code>lwgeom</code>, <code>mmap</code>. et al.</p>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick Start</h2>
<p>A sample dataset of building footprints is provided:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load the sample</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"kampala"</span>, <span class="at">package=</span><span class="st">"foot"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2D vector building polygons</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>kampala<span class="sc">$</span>buildings</span></code></pre></div>
<div id="vignettes" class="section level3">
<h3 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h3>
<p>Vignettes are provided as an introduction to <code>foot</code>. The vignette on basic usage is available from <code><a href="articles/footsteps.html">vignette("footsteps", package = "foot")</a></code>. The supplied datasets can be used to replicate this vignette. For a discussion and example of creating gridded data layers, see <code><a href="articles/bigfoot.html">vignette("bigfoot", package = "foot")</a></code>. Finally, techniques for using custom morphology metric functions with <code>foot</code> is demonstrated in <code><a href="articles/cobbler.html">vignette("cobbler", package = "foot")</a></code>. These vignettes are also available from this package website.</p>
</div>
<div id="basic-usage" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic Usage</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wpgp/foot">foot</a></span><span class="op">)</span>

<span class="co"># load sample data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"kampala"</span>, package <span class="op">=</span> <span class="st">"foot"</span><span class="op">)</span>
<span class="va">buildings</span> <span class="op">&lt;-</span> <span class="va">kampala</span><span class="op">$</span><span class="va">buildings</span>
<span class="va">zones</span> <span class="op">&lt;-</span> <span class="va">kampala</span><span class="op">$</span><span class="va">adminZones</span>
<span class="va">grid</span> <span class="op">&lt;-</span> <span class="va">kampala</span><span class="op">$</span><span class="va">mastergrid</span></code></pre></div>
<p>The <code>foot</code> package provides tools to calculate and summarise building morphology measures at multiple scales. These include building-level geometry measures.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># building-level metrics</span>
<span class="va">buildings</span><span class="op">$</span><span class="va">built_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/calculate_footstats.html">calculate_footstats</a></span><span class="op">(</span><span class="va">buildings</span>, what <span class="op">=</span> <span class="st">"area"</span><span class="op">)</span>
<span class="co">#&gt; Selecting metrics </span>
<span class="co">#&gt; Setting control values. </span>
<span class="co">#&gt; Pre-calculating areas </span>
<span class="co">#&gt; No summary functions found, returning metrics.</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">buildings</span><span class="op">)</span>
<span class="co">#&gt; Simple feature collection with 6 features and 2 fields</span>
<span class="co">#&gt; Geometry type: POLYGON</span>
<span class="co">#&gt; Dimension:     XY</span>
<span class="co">#&gt; Bounding box:  xmin: 32.60765 ymin: 0.341117 xmax: 32.61288 ymax: 0.345773</span>
<span class="co">#&gt; Geodetic CRS:  WGS 84</span>
<span class="co">#&gt;   FID_1                       geometry            area</span>
<span class="co">#&gt; 1   130 POLYGON ((32.61287 0.341117...  22.10707 [m^2]</span>
<span class="co">#&gt; 2   132 POLYGON ((32.6123 0.341771,... 221.37976 [m^2]</span>
<span class="co">#&gt; 3   133 POLYGON ((32.60812 0.34277,...  39.13247 [m^2]</span>
<span class="co">#&gt; 4   135 POLYGON ((32.60784 0.343618... 388.48091 [m^2]</span>
<span class="co">#&gt; 5   137 POLYGON ((32.608 0.344555, ... 351.14738 [m^2]</span>
<span class="co">#&gt; 6   138 POLYGON ((32.60772 0.345582... 164.74579 [m^2]</span></code></pre></div>
<p>As well as area-level summaries within spatial zones.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Area-level summary metrics</span>
<span class="co"># Optionally, create an index for the buildings to zones</span>
<span class="va">building_zone</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/zonalIndex.html">zonalIndex</a></span><span class="op">(</span><span class="va">buildings</span>, 
                            <span class="va">zones</span>, 
                            zoneField <span class="op">=</span> <span class="st">"Id"</span>, 
                            returnObject <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># summarise metrics within small areal units</span>
<span class="va">admin_area</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/calculate_footstats.html">calculate_footstats</a></span><span class="op">(</span><span class="va">building_zone</span>, 
                                  zone <span class="op">=</span> <span class="st">"Id"</span>, 
                                  what <span class="op">=</span> <span class="st">"area"</span>, how <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span>
<span class="co">#&gt; Selecting metrics </span>
<span class="co">#&gt; Setting control values. </span>
<span class="co">#&gt; Pre-calculating areas </span>
<span class="co">#&gt; Creating zonal index </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Calculating  1  metrics ... </span>
<span class="co">#&gt;    area mean  </span>
<span class="co">#&gt; Finished calculating metrics.</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">admin_area</span><span class="op">)</span>
<span class="co">#&gt;    Id       area_mean</span>
<span class="co">#&gt; 1:  1  404.4062 [m^2]</span>
<span class="co">#&gt; 2:  2  212.0011 [m^2]</span>
<span class="co">#&gt; 3:  3  527.4325 [m^2]</span>
<span class="co">#&gt; 4:  4  557.5857 [m^2]</span>
<span class="co">#&gt; 5:  5  571.2692 [m^2]</span>
<span class="co">#&gt; 6:  6 1026.5419 [m^2]</span></code></pre></div>
<p>Or gridded summary outputs, with the options to include a circular focal window.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># calculated along a raster within a circular focal window</span>
<span class="va">gridded</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/calculate_bigfoot.html">calculate_bigfoot</a></span><span class="op">(</span><span class="va">buildings</span>, 
                             what <span class="op">=</span> <span class="st">"area"</span>, 
                             how <span class="op">=</span> <span class="st">"mean"</span>,
                             focalRadius <span class="op">=</span> <span class="fl">200</span>,
                             template <span class="op">=</span> <span class="va">grid</span>,
                             outputPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; trying to read file: C:\Users\Admin\Documents\GitHub\foot\wd\in\kampala_grid.tif</span>
<span class="co">#&gt; Selecting metrics </span>
<span class="co">#&gt; Setting control values </span>
<span class="co">#&gt; Creating output grids </span>
<span class="co">#&gt; Creating list of processing tiles </span>
<span class="co">#&gt; Setting up cluster...</span>
<span class="co">#&gt; Begin parallel tile processing: 2021-07-15 11:44:02</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Finished processing all tiles: 2021-07-15 11:44:06</span>

  <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span><span class="va">gridded</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">buildings</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/REAsDME-unnamed-chunk-4-1.png" width="100%"></p>
</div>
<div id="outputs" class="section level3">
<h3 class="hasAnchor">
<a href="#outputs" class="anchor"></a>Outputs</h3>
<p>Rasters in GeoTiff format or data tables:</p>
<ol>
<li>Binary settlement indicators</li>
<li>Counts of structures</li>
<li>Building area</li>
<li>Building perimeter</li>
<li>Nearest neighbour distance</li>
<li>Nearest neighbour index</li>
<li>Structure orientation angle (normalised entropy)</li>
<li>Compactness (Polsby-Popper)</li>
<li>Roundness</li>
<li>Length to (equivalent-) width ratio</li>
</ol>
<p>A full list of characteristics and summary function names can be retrieved with <code><a href="reference/list_fs.html">foot::list_fs()</a></code>.</p>
</div>
</div>
<div id="contributions" class="section level2">
<h2 class="hasAnchor">
<a href="#contributions" class="anchor"></a>Contributions</h2>
<p>Contributions are welcome. Raise or respond to an issue, or create a new branch to develop a feature/modification and submit a pull request.</p>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span><span class="op">(</span><span class="st">"foot"</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite package 'foot' in publications use:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   WorldPop Research Group, University of Southampton (2021). foot: An R package for processing building footprint morphometrics. https://github.com/wpgp/foot,</span>
<span class="co">#&gt;   https://wpgp.github.io/foot/.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Manual{,</span>
<span class="co">#&gt;     title = {foot: An R package for processing building footprint morphometrics},</span>
<span class="co">#&gt;     author = {{WorldPop Research Group, University of Southampton}},</span>
<span class="co">#&gt;     year = {2021},</span>
<span class="co">#&gt;     note = {https://github.com/wpgp/foot, https://wpgp.github.io/foot/},</span>
<span class="co">#&gt;   }</span></code></pre></div>
<p>This work was undertaken by members of the WorldPop Research Group at the University of Southampton (Chris Jochem, Edith DarÃ­n, Claire Dooley, Doug Leasure) with support from Andy Tatem and Attila Lazar. Funding support comes from the Bill and Melinda Gates Foundation and the United Kingdom Foreign, Commonwealth &amp; Development Office as part of the Geo-Referenced Infrastructure and Demographic Data for Development project (GRID3) (OPP1182408). Project partners in <a href="https://grid3.org/">GRID3</a> include the WorldPop Research Group, the United Nations Population Fund, the Flowminder Foundation, and the Center for International Earth Science Information Network within the Earth Institute at Columbia University.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/wpgp/foot/">https://â€‹github.com/â€‹wpgp/â€‹foot/â€‹</a>
</li>
<li>Report a bug at <br><a href="https://github.com/wpgp/foot/issues">https://â€‹github.com/â€‹wpgp/â€‹foot/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a>.0</small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>WorldPop Research Group, University of Southampton <br><small class="roles"> Author </small>  </li>
<li>Chris Jochem <br><small class="roles"> Contributor, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by WorldPop Research Group, University of Southampton, Chris Jochem.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
