<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Building angle calculation — fs_angle_entropy • foot</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Building angle calculation — fs_angle_entropy" />
<meta property="og:description" content="Calculate the entropy of rotation angles for building footprint
polygons within zones." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">foot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/footsteps.html">footsteps: Getting started</a>
    </li>
    <li>
      <a href="../articles/bigfoot.html">bigfoot: Gridded footprint calculations</a>
    </li>
    <li>
      <a href="../articles/cobbler.html">cobbler: Using custom summary functions</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/wpgp/foot/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Building angle calculation</h1>
    <small class="dont-index">Source: <a href='https://github.com/wpgp/foot/blob/master/R/fs_angle_entropy.R'><code>R/fs_angle_entropy.R</code></a></small>
    <div class="hidden name"><code>fs_angle_entropy.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate the entropy of rotation angles for building footprint
polygons within zones.</p>
    </div>

    <pre class="usage"><span class='fu'>fs_angle_entropy</span><span class='op'>(</span><span class='va'>X</span>, index <span class='op'>=</span> <span class='cn'>NULL</span>, col <span class='op'>=</span> <span class='cn'>NULL</span>, normalize <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># S3 method for sp</span>
<span class='fu'>fs_angle_entropy</span><span class='op'>(</span><span class='va'>X</span>, index <span class='op'>=</span> <span class='cn'>NULL</span>, col <span class='op'>=</span> <span class='cn'>NULL</span>, normalize <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># S3 method for sf</span>
<span class='fu'>fs_angle_entropy</span><span class='op'>(</span><span class='va'>X</span>, index <span class='op'>=</span> <span class='cn'>NULL</span>, col <span class='op'>=</span> <span class='cn'>NULL</span>, normalize <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># S3 method for sfc</span>
<span class='fu'>fs_angle_entropy</span><span class='op'>(</span><span class='va'>X</span>, index <span class='op'>=</span> <span class='cn'>NULL</span>, col <span class='op'>=</span> <span class='cn'>NULL</span>, normalize <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>X</th>
      <td><p>Spatial object with building footprint polygons</p></td>
    </tr>
    <tr>
      <th>index</th>
      <td><p>A string identifying a column within <code>X</code> which provides a
zonal index for summarising values. Alternatively a vector of indices can
be provided. If omitted, all observations in <code>X</code> are assumed to be
within one zone.</p></td>
    </tr>
    <tr>
      <th>col</th>
      <td><p>column name within <code>X</code> with pre-calculated area measures</p></td>
    </tr>
    <tr>
      <th>normalize</th>
      <td><p>A logical value indicating whether to normalize the entropy. 
Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>unit</th>
      <td><p>character or <code>units</code> object to define area. Default is
<code>NULL</code> which will use the units of the spatial reference system</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>data.table</code> of zonal indices and values.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This measure uses the angle of the minimum rotated rectangle
  enclosing each footprint polygon. Entropy is an information criteria
  measure. When summarising the angles of footprints, higher entropy values
  may suggest less formally planned or zoned areas. The entropy calculation
  uses the common Shannon's Entropy. The normalization step produces an
  indicator for how much a zone departs from a grid. This metric is based on
  work by Boeing (2019).</p>  
<p>Note that this function is provided as a standalone calculation for
  convenience. The same summary measure can be executed within
  <code>calculate_footstats</code> by specifying <code>what='angle'</code> and
  <code>how='entropy'</code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Boeing, Geoff (2019). "Urban spatial order: Street network
  orientation, configuration, and entropy." Applied Network Science, 4(67),
  <a href='https://doi.org/10.1007/s41109-019-0189-1'>https://doi.org/10.1007/s41109-019-0189-1</a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"kampala"</span>, package<span class='op'>=</span><span class='st'>"foot"</span><span class='op'>)</span>
<span class='va'>b</span> <span class='op'>&lt;-</span> <span class='va'>kampala</span><span class='op'>$</span><span class='va'>buildings</span>

<span class='co'># assign random groups</span>
<span class='va'>idx</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>b</span><span class='op'>)</span>, replace<span class='op'>=</span><span class='cn'>T</span><span class='op'>)</span>

<span class='va'>angles</span> <span class='op'>&lt;-</span> <span class='fu'>fs_angle_entropy</span><span class='op'>(</span><span class='va'>b</span>, index<span class='op'>=</span><span class='va'>idx</span>, normalize<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>angle_norm</span> <span class='op'>&lt;-</span> <span class='fu'>fs_angle_entropy</span><span class='op'>(</span><span class='va'>b</span>, index<span class='op'>=</span><span class='va'>idx</span>, normalize<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in `[.data.table`(result, , `:=`(entropy, 1 - ((entropy - hg)/(hmax -     hg))^2), by = index): The items in the 'by' or 'keyby' list are length(s) (4840). Each must be length 10; the same length as there are rows in x (after subsetting if i is provided).</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by WorldPop Research Group, University of Southampton, Chris Jochem.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


